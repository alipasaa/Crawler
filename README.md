# Crawler

To Crawling_Project αυτό που κάνει είναι να συλλέγει δεδομένα από μία δοσμένη σελίδα και τις σελίδες που βρίσκονται μέσα σε αυτή.  Πιο συγκεκριμένα η αρχική σελίδα που χρησιμοποιείται είναι το https://shopflix.gr/c/24/smartphones . Πηγαίνοντας αρχικά σε αυτή την σελίδα συλλέγει από όλα τα προϊόντα που βρίσκονται εκεί: τον τίτλο, την περιγραφή, την βαθμολογία τους (αν αυτή υπάρχει) και έναν μοναδικό κωδικό που έχει το κάθε προϊόν ώστε να χρησιμοποιηθεί σαν UNIQUE(external_id) και τα αποθηκεύει σε μια σχεσιακή βάση δεδομένων με το όνομα “crawler_db” και συγκεκριμένα στον πίνακα “products”.

Στην συνέχεια επισκέπτεται με την βοήθεια του Selenium webdriver έναν-ένα όλα τα link που βρέθηκαν στην αρχική σελίδα ώστε να κατευθυνθεί σε κάθε προϊόν και συλλέγει για κάθε ένα από αυτά τα καταστήματα που το πουλάνε,το όνομα, την βαθμολογία, την τιμή και ένα μοναδικό αναγνωριστικό για αυτό το κατάστημα που χρησιμοποιείται σαν external_id. Όλα αυτά τα δεδομένα αποθηκεύονται στην ίδια βάση δεδομένων,  στον πίνακα “retail_shop”. Για να ξέρουμε για κάθε product ποια είναι τα retail_shop που του αντιστοιχούν χρησιμοποιείται σαν FOREIGN KEY το product.id.

Την πρώτη φορά που θα τρέξει το πρόγραμμα θα αποθηκεύσει αυτές τις πληροφορίες στην βάση. Την δεύτερη φορά που θα τρέξει, για κάθε product που βρίσκει στην αρχική σελίδα ελέγχει αν υπάρχει ήδη στην βάση ώστε να μην το καταχωρήσει ξανά. Παρόλα αυτά κατευθύνεται στην σελίδα του προϊόντος γιατί μπορεί να υπάρχουν νέα καταστήματα που το πουλάνε. Αν βρει καινούρια καταστήματα τα καταχωρεί ενώ αν βρει κάποιο προηγούμενο κατάστημα που έχει περαστεί ήδη στην βάση δεν το ξαναπερνάει. Για τον έλεγχο της μοναδικότητας χρησιμοποιείται ένας περιορισμός πάνω στις κολώνες product.id και external_id του καταστήματος.

Ουσιαστικά κάθε επόμενη φορά που ξανατρέχει το πρόγραμμα ανανεώνει την βάση με ότι καινούριο υπάρχει στο product και αντίστοιχα τα retail_shop του ή για υπάρχοντα product μόνο τα retail_shop του.


Το περιβάλλον δημιουργίας του project ειναι το IntelliJ.
To framework που χρησιμοποιήθηκε ειναι το Spring Boot.
Επίσης για τo Web Browsing χρησιμοποιήθηκε το Selenium WebDriver.
To Hibernate χρησιμοποιείται για ORM με υλοποίηση σε JPA.
Για να συλλεχθούν από την HTML οι πληροφορίες για τα προϊόντα και τα καταστήματα χρησιμοποιήθηκαν CSS Selectors. Σε κάποιες περιπτώσεις, η πλατφόρμα δεν παρείχε κατάλληλα αναγνωριστικά (ids) στα υπό εξέταση html elements ή στην ευρύτερη ιεραρχία / γειτονία αυτών, επομένως οι selectors που χρησιμοποιήθηκαν δεν θα μπορούσαν να χαρακτηριστούν ιδιαίτερα κομψοί.

Τα SQL statements για την δημιουργία της βάσης δεδομένων βρίσκονται στο αρχείο:
`src/main/resources/database/db.sql`

To url, username και password για την επικοινωνία θα πρέπει να συμπληρωθούν στο αρχείο:
`src/main/resources/application.properties`

Το πρόγραμμα δέχεται παραμετρικά ως το πρώτο όρισμα την αρχική σελίδα
π.χ  `https://shopflix.gr/c/24/smartphones`
